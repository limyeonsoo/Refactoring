# 3. smell of the code

# [언제] / [어디까지] 리팩터링을 진행해야 할까?

> "코드에서 냄새가 날 때" (when)

> "각자 경험에서 감을 찾자" (How Far)

## 1. Mysterious Name (기이한 이름)

누가봐도 명백한 의도를 알 수 있는 '변수명', '함수명', '필드명' 등은 최고다.

- 문맥 파악이 쉽다.
- 직관적으로 찾아보지 않아도 의도가 떠오를 수 있다.

## 2. Duplicated Code (중복 코드)

똑같은 코드 구조가 반복된다면 하나로 통합하자.

**⭐ 코드가 중복되면 각 코드를 볼 때 차이점을 찾으려고 에너지를 쏟게 되버린다. (극 공감)**

- 두 메소드가 똑같은 표현식을 쓴다면 하나로 줄일 수 있다.
- 어렴풋이 비슷한 것도 추출 해낼 수 있다.

## 3. Long Function (긴 함수)

짧은 함수의 효과

- 간접 호출의 효과
    1. 이해
    2. 공유
    3. 선택

과거에는 짧은 함수 여럿은 호출 비용이 커서 지양되었으나,
요즘은 이런 걱정은 필요없다.

+ 이름 조차도 짧게 지어놓는다면 이해 효과는 더 좋다.

매개 변수 or 임시 변수가 많다면???

1. 객체 형태로 통째로 넘겨서 매개변수의 수를 줄일 수 있다.
2. **임시 변수를 질의 함수로 바꾸기**를 통해 임시 변수의 수를 줄일 수 있다.

## 4. 긴 매개변수 목록

매개변수를 모조리 다 넣어버리면 이해 자체도 어렵고,
개인적인 생각 : 여러줄에 애매하게 걸쳐버리면 읽기도 싫어진다.

skill : 

1. 매개 변수를 질의 함수로 바꾸기.
2. 객체 통째로 넘기기
3. 매개변수 객체 만들기
4. 플래그 인수 제거하기
5. 여러 함수를 클래스로 묶기

## 5. 전역 데이터

1. 전역 변수
2. 클래스 변수
3. 싱글톤

등 에서  문제가 발생할 위험이 클 수 있다.

접근을 통제해야할 것 같다면 캡슐화 해서 제한하는 것이 가장 안전하다.